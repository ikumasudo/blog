---
import Layout from "@layouts/layout.astro";
import Seo from "@components/seo.astro";
import { getCollection } from "astro:content";
import { Content as Hero } from "@assets/hero.mdx";
import SkipNavContent from "@components/a11y/skip-nav-content.astro";
import { defaultDateFormat, sortAsc } from "@utils";
import Link from "@components/link.astro";
import Prose from "@components/prose.astro";
import Spacer from "@components/spacer.astro";
import { SITE } from "@constants";

const OSS_PROJECTS: Array<{ name: string; url: string; description: string }> =
    [
        {
            name: "secco",
            url: "https://github.com/LekoArts/secco",
            description: "Local package testing made easy",
        },
        {
            name: "astro-loaders",
            url: "https://github.com/LekoArts/astro-loaders",
            description: "Loaders for Astro's Content Layer",
        },
        {
            name: "annum",
            url: "https://github.com/LekoArts/annum",
            description: "Visualize your Trakt.tv history",
        },
    ];

const INTERESTS: Array<{ label: string; labelJa: string; emoji: string }> = [
    { label: "Machine Learning", labelJa: "æ©Ÿæ¢°å­¦ç¿’", emoji: "ğŸ§ " },
    { label: "Computer Vision", labelJa: "ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ“ã‚¸ãƒ§ãƒ³", emoji: "ğŸ‘ï¸" },
    { label: "AI Agents", labelJa: "AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ", emoji: "ğŸ¤–" },
    { label: "Self Hosting", labelJa: "ã‚»ãƒ«ãƒ•ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°", emoji: "ğŸ–¥ï¸" },
    { label: "Infrastructure", labelJa: "ã‚¤ãƒ³ãƒ•ãƒ©", emoji: "ğŸ—ï¸" },
    { label: "Web Development", labelJa: "Webé–‹ç™º", emoji: "ğŸŒ" },
    { label: "Math & Science", labelJa: "æ•°å­¦ãƒ»è‡ªç„¶ç§‘å­¦", emoji: "ğŸ”¬" },
    { label: "History", labelJa: "æ­´å²", emoji: "ğŸŒ" },
    { label: "Economics", labelJa: "çµŒæ¸ˆ", emoji: "ğŸ’¹" },
    { label: "Novel", labelJa: "å°èª¬", emoji: "ğŸ“–" },
    { label: "Organizational Design", labelJa: "çµ„ç¹”è¨­è¨ˆ", emoji: "ğŸ›ï¸" },
    { label: "Languages", labelJa: "è¨€èª", emoji: "ğŸ—£ï¸" },
];

const POSTS_TO_SHOW = 3;

const posts = sortAsc(await getCollection("blog")).slice(0, POSTS_TO_SHOW);
---

<Layout>
    <Seo slot="seo" />
    <SkipNavContent>
        <h1 class="sr-only">{SITE.title}</h1>
        <Prose>
            <Hero />
        </Prose>
        <Spacer axis="vertical" size={32} />
        <section>
            <h2
                class="font-medium text-xl md:text-2xl lg:text-3xl text-highlight"
            >
                Interests
            </h2>
            <Spacer axis="vertical" size={8} />
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
                {
                    INTERESTS.map(({ label, labelJa, emoji }) => (
                        <div class="flex flex-col items-center text-center rounded-xl bg-ic-bg border border-ic-border px-3 py-4 transition-all duration-200 ease-in-out hover:-translate-y-1 hover:shadow-md dark:hover:shadow-gray-900/50">
                            <span class="text-2xl md:text-3xl" role="img" aria-hidden="true">{emoji}</span>
                            <span class="mt-2 text-sm md:text-base font-medium text-highlight leading-tight">{label}</span>
                            <span class="mt-0.5 text-xs md:text-sm text-faded leading-tight">{labelJa}</span>
                        </div>
                    ))
                }
            </div>
        </section>
        <Spacer axis="vertical" size={32} />
        <section>
            <div
                class="border-b border-border pb-4 flex justify-between items-center"
            >
                <h2
                    class="font-medium text-xl md:text-2xl lg:text-3xl text-highlight"
                >
                    Latest Posts
                </h2>
                <div><Link href="/blog/">Read all posts</Link></div>
            </div>
            <Spacer axis="vertical" size={8} />
            <div class="flex gap-10 flex-col">
                {
                    posts.map(({ data: post }) => (
                        <div>
                            <Link variant="highlight" href={`/${post.slug}/`}>
                                {post.title}
                            </Link>
                            <Spacer axis="vertical" size={2} />
                            <div class="text-faded">
                                {defaultDateFormat(post.date)}
                            </div>
                        </div>
                    ))
                }
            </div>
        </section>
        <Spacer axis="vertical" size={24} />
    </SkipNavContent>
</Layout>
